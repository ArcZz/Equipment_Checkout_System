<!DOCTYPE html>
<html>
	<head>

		<title></title>
		
		<script src = "jquery-2.2.3.min.js"></script>
		<script>
		
			var activeDiv;
			var divIndex = -1;
			var divID = "main";
		
			class item{
				
				constructor(name, location){
				
					this.name = name;
				}
			}
			
			class checkoutItem extends item{
				
				constructor(itemName, location, studentName, time){
				
					super(itemName, location);
					this.student = studentName;
					this.time = time;
				}
				
				
			}
		
			$(function(){
			
				var id = 0;
				
				makeExpandBox(new checkoutItem("Guns", "Memorial", "Brai", "12:30"), id++);
				makeExpandBox(new checkoutItem("Memes", "Memorial", "Dan", "04:14"), id++);
				makeExpandBox(new checkoutItem("Bike", "Memorial", "Ryan", "02:30"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Memorial", "Mathas", "11:23"), id++);
				makeExpandBox(new checkoutItem("Toplap", "Memorial", "Abyss Watchers", "01:45"), id++);
				makeExpandBox(new checkoutItem("Bike", "Memorial", "Nick", "06:01"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Memorial", "Vordt", "04:15"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Student Center", "Smough", "09:30"), id++);
				makeExpandBox(new checkoutItem("Say laptop one more time", "Student Center", "Dismas", "10:00"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Student Center", "Dumont", "03:15"), id++);
				makeExpandBox(new checkoutItem("Loooooooooooooooooooooooonnnnnnnnng", "Student Center", "Gand", "04:20"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Student Center", "Barristan", "04:00"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Student Center", "Junia", "04:15"), id++);
				makeExpandBox(new checkoutItem("Laptop", "Student Center", "Pischot", "11:34"), id++);
				
			});
			
			function makeExpandBox(checkoutItem, id){
			
				$("#" + divID).append("<div class = 'expander' id = " + id + "></div>");
				$("#" + id).append("<p class = 'apart'>" + checkoutItem.student + "</p>");
				$("#" + id).append("<p class = 'apart'>" + checkoutItem.name + "</p>");
				$("#" + id).append("<p class = 'apart time'>" + checkoutItem.time + "</p>");
				$("#" + id).append("<div class = 'big' id = " + "big" + id + ">Content</div>");
				$("#" + id).click(function(){
				
					expand($(this));
				});
			}
			
			function expand(element){
			
				if(activeDiv){
					
					if(!(element[0] == activeDiv[0])){
					
						putBack(divIndex, activeDiv);
					}
				}
			
				moveElement(element);
				element.children("div").width($("#" + divID).width() - 70);
				element.children("div").slideDown(250);
			}
			
			function putBack(index, element){
			
				element.children("div").slideUp(250, function(){
				
					$("#" + index).after(element);
					restoreId(parseInt(element.attr("id")), index);
						
					element.unbind("click");
					element.click(function(){
						
						expand($(this));
					});
				});
			}
			
			function moveElement(element){
				
				var position = element.index(),
					indexInit = element.index(),
					prev = element.position().left;
					position--;
			
				while((position > -1) && ($("#main").children("#" + position).position().left < prev)){
				
					prev = $("#" + position).position().left;
					position--;
				}
				
				position++;
				
				element.unbind("click");
				element.click(function(){
				
					putBack(indexInit, $(this));
				});
				
				$("#" + position).before(element);
				
				restoreId(position, indexInit);
				
				activeDiv = element;
				divIndex = indexInit;
			}
			
			function restoreId(rowLead, maxID){
			
				var divs = new Array();
			
				for(i = rowLead; i <= maxID; i++){
				
					divs.push($("#" + i));
				}
				
				divs.forEach(function(currentValue){
				
					currentValue.attr("id", "" + currentValue.index());
				});
			}
		</script>
		
		<style>
		
			*{
			
				margin:0;
			}
			
			div.expander{
			
				background-color: lightGray;
				border: 5px solid white;
				border-radius: 20px;
				display: inline-block;
				margin: 10px;
				padding: 10px;
			}
			
			div.expander:hover{
			
				border: 5px solid black;
			}
			
			p.apart{
			
				font-size: 18pt;
				padding: 5px;
			}
			
			.big{
			
				display: none;
				height: 250px;
				width: 1200px;
			}
		</style>
	</head>

	<body>

		<div id = "main">
		
		</div>
	</body>
</html>